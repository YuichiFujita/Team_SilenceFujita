//======================================================================================================================
//
//	ライト処理 [light.cpp]
//	Author：藤田勇一
//
//======================================================================================================================
//**********************************************************************************************************************
//	インクルードファイル
//**********************************************************************************************************************
#include "main.h"
#include "light.h"

//**********************************************************************************************************************
//	マクロ定義
//**********************************************************************************************************************
#define MAX_LIGHT		(3)			// 使用するライト数

//**********************************************************************************************************************
//	グローバル変数
//**********************************************************************************************************************
D3DLIGHT9 g_aLight[MAX_LIGHT];		// ライトの情報

//======================================================================================================================
//	ライトの初期化処理
//======================================================================================================================
void InitLight(void)
{
	// 変数配列を宣言
	D3DXCOLOR   aDiffuse[MAX_LIGHT];			// 設定用拡散光カラー
	D3DXVECTOR3 aVecDir[MAX_LIGHT];				// 設定用方向ベクトル

	// ポインタを宣言
	LPDIRECT3DDEVICE9 pDevice = GetDevice();	// デバイスへのポインタ

	// 拡散光カラーを設定
	aDiffuse[0] = D3DXCOLOR(1.0f,  1.0f,  1.0f,  1.0f);
	aDiffuse[1] = D3DXCOLOR(0.65f, 0.65f, 0.65f, 1.0f);
	aDiffuse[2] = D3DXCOLOR(0.2f , 0.2f , 0.2f , 1.0f);

	// 方向ベクトルを設定
	aVecDir[0] = D3DXVECTOR3(0.22f, -0.87f, 0.44f);
	aVecDir[1] = D3DXVECTOR3(-0.38f, 0.88f, -0.44f);
	aVecDir[2] = D3DXVECTOR3(0.89f, -0.11f, 0.44f);

	for (int nCntLight = 0; nCntLight < MAX_LIGHT; nCntLight++)
	{ // 使用するライト数分繰り返す

		// 構造体の要素をクリア
		ZeroMemory(&g_aLight[nCntLight], sizeof(D3DLIGHT9));

		// ライトの種類を設定
		g_aLight[nCntLight].Type = D3DLIGHT_DIRECTIONAL;

		// ライトの拡散光を設定
		g_aLight[nCntLight].Diffuse = aDiffuse[nCntLight];

		// ライトの方向を設定
		D3DXVec3Normalize(&aVecDir[nCntLight], &aVecDir[nCntLight]);	// ベクトルを正規化
		g_aLight[nCntLight].Direction = aVecDir[nCntLight];

		// ライトを設定する
		pDevice->SetLight(nCntLight, &g_aLight[nCntLight]);

		// ライトを有効にする
		pDevice->LightEnable(nCntLight, TRUE);
	}
}

//======================================================================================================================
//	ライトの終了処理
//======================================================================================================================
void UninitLight(void)
{

}

//======================================================================================================================
//	ライトの更新処理
//======================================================================================================================
void UpdateLight(void)
{

}